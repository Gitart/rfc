Формат приемо-передачи данных для PharmXplorer (Draft)
=======================================================

*документ постоянно обновляется*

Искомый формат предполагает возможность передачи прихода/расхода/остатка из одной или нескольких точек за определенный временной интервал, как всех вместе взятых, так и по отдельности. 

* Формат [JSON](http://json.org/json-ru.html)
* Кодировка [UTF-8](http://ru.wikipedia.org/wiki/UTF-8)
* `//` - это комментарий только для пояснения и он должен отсутствовать в реальных данных
* `[*]` - эту пару ключ-значение можно пропустить 
* `string` - строка “в двойных кавычках”
* `string(date)` - строка в формате даты “dd.mm.yyyy hh:mm:ss”
* `number(int)` - число целое
* `number(float)` - число с плавающей точкой (разделитель точка “.”)

```
{
	  // Метаданные
	"Meta": {
		  // Версия формата
		"Version": number(int),
		  // Отправитель (public key)
		"Sender": string,
		  // Агент передачи данных [*]
		"Agent": string
	},
	  // Данные (массив заголовок/содержание)
	"Data": [{
		  // Заголовок
		"Head": {
			  // Источник данных (BR_NICK)
			"Source": string,
			  // FIXME Массив типов данных в содержании
			"ItemType": [number(int)],
			  // Временной диапазон отбора данных
			"TimeRange": {
				  // Нижняя граница
				Lower: string(date),
				  // Верхняя граница
				Upper: string(date)
			}
		},
		  // Содержание (массив записей содержания)
		"Item": [{
			  // Код препарата клиента [40 символов]
			"Code": string,
			  // Полное наименование препарата + производитель (через пробел) [255 символов]
			"Name": string,
			  // FIXME Связь с данными компании "Морион" [*], пропускается в источнике данных
			"Link": {object},
			  // Приход количество
			"QuantIn": number(float),
			  // Приход цена (за единицу товара)
			"PriceIn": number(float),
			  // Расход количество
			"QuantOut": number(float),
			  // Расход цена (за единицу товара)
			"PriceOut": number(float),
			  // Остаток на конец периода
			"QuantEnd": number(float)
			}]
	}]
}
```

```
{"Meta":{"Version":1,"Sender":"f96b5d3726906aeb99fb6b2bc37f91a519cbc767","Agent":"My cool app"},"Data":[{"Head":{"Source":"BR_NICK","ItemType":[1,"TimeRange":{Lower:"25.09.2012 00:00:00",Upper:"25.09.2012 23:59:59"}},"Item": [{"Code": "10420","Name": "Авамис аэр.27,5мкг/доза бал. 30д Глаксо Велком","QuantIn": 1,"PriceIn": 32.5,"QuantOut": 0,"PriceOut": 0,"QuantEnd": 0},{"Code":"4048","Name":"АД Минус табл. 0,55г. №40 Эвалар","QuantIn":1,"PriceIn":31.24,"QuantOut":0,"PriceOut":0,"QuantEnd":0},{"Code":"83","Name":"Аскорб.к-та 10% 2мл. №10 Здоровье АО,Харьков","QuantIn":5,"PriceIn":9.99,"QuantOut":0,"PriceOut":0,"QuantEnd":0}]}]}
```
